@using Blazorise
@using NovaLab.Components.Layout
@using NovaLab.Components.Account.Shared

<!DOCTYPE html>
<html lang="en">

<head>
    <title>NovaLab</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <base href="/"/>
    
    <link rel="stylesheet" href="app.css"/>
    <link rel="icon" type="image/png" href="favicon.png"/>

    @* Blazorise stuff *@
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <link href="_content/Blazorise/blazorise.css" rel="stylesheet" />
    <link href="_content/Blazorise.Bootstrap5/blazorise.bootstrap5.css" rel="stylesheet" />
    <link href="_content/Blazorise.Icons.FontAwesome/v6/css/all.min.css" rel="stylesheet">
    <link href="_content/Blazorise.SpinKit/blazorise.spinkit.css" rel="stylesheet" />

    <HeadOutlet/>
</head>

<body>
@* FOR THE LOVE OF GOD: https://stackoverflow.com/a/77428077 *@
@* <Routes @rendermode="InteractiveServer" />*@
<script src="_framework/blazor.web.js"></script>

<Blazorise.ThemeProvider Theme="@theme">
    <Router AppAssembly="typeof(App).Assembly">
        <Found Context="routeData">
            <AuthorizeRouteView RouteData="routeData" DefaultLayout="typeof(MainLayout)">
                <NotAuthorized>
                    <RedirectToLogin/>
                </NotAuthorized>
            </AuthorizeRouteView>
            <FocusOnNavigate RouteData="routeData" Selector="h1"/>
        </Found>
        @* <NotFound> *@
        @*     <LayoutView Layout="typeof(MainLayout)"> *@
        @*         <p>Sorry, there's nothing at this address.</p> *@
        @*     </LayoutView> *@
        @* </NotFound> *@
    </Router>

    <MessageProvider/>
    <PageProgressProvider/>
</Blazorise.ThemeProvider>

</body>

</html>



@code {
    [CascadingParameter]
    private HttpContext HttpContext { get; set; } = default!;
    private IComponentRenderMode? RenderModeForPage => HttpContext.Request.Path.StartsWithSegments("/Account") ? 
        null : //null rendermode represents SSR.
        InteractiveServer;

    private Theme theme = new() {
        BarOptions = new() {
            HorizontalHeight = "72px"
        },
        ColorOptions = new() {
            Primary = "#0288D1",
            Secondary = "#A65529",
            Success = "#23C02E",
            Info = "#9BD8FE",
            Warning = "#F8B86C",
            Danger = "#F95741",
            Light = "#F0F0F0",
            Dark = "#535353",
        },
        BackgroundOptions = new() {
            Primary = "#0288D1",
            Secondary = "#A65529",
            Success = "#23C02E",
            Info = "#9BD8FE",
            Warning = "#F8B86C",
            Danger = "#F95741",
            Light = "#F0F0F0",
            Dark = "#535353",
        },
        InputOptions = new() {
            CheckColor = "#0288D1",
        }
    };

}